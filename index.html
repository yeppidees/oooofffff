<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ê²½ì˜ ì‹œë®¬ë ˆì´ì…˜</title>
    <style>
        :root {
            --bg: #f8f9fa; --card: #ffffff; --primary: #9fa8da; --secondary: #a5d6a7;
            --danger: #ef9a9a; --warning: #ffe082; --info: #90caf9; --text: #455a64; --border: #eceff1;
        }
        body { font-family: 'Pretendard', sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 10px; line-height: 1.5; }
        .container { max-width: 1200px; margin: 0 auto; display: flex; flex-direction: column; gap: 15px; }
        @media (min-width: 1024px) { .container { display: grid; grid-template-columns: 1.6fr 1fr; align-items: start; } }
        .card { background: var(--card); padding: 15px; border-radius: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.03); border: 1px solid var(--border); margin-bottom: 10px; }
        header { text-align: center; margin-bottom: 10px; }
        .company-name { font-size: 1.8rem; font-weight: 800; color: #7986cb; border: none; background: transparent; text-align: center; width: 100%; outline: none; }
        .tabs { display: flex; gap: 8px; margin-bottom: 10px; overflow-x: auto; }
        .tab-btn { background: #cfd8dc; color: #546e7a; padding: 10px 15px; border-radius: 12px; cursor: pointer; font-weight: bold; border: none; flex: 1; transition: 0.3s; white-space: nowrap; }
        .tab-btn.active { background: var(--primary); color: white; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .char-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 12px; }
        .char-item { border: 1px solid var(--border); padding: 15px; border-radius: 16px; background: #fff; cursor: pointer; transition: 0.2s; position: relative; }
        .char-item:hover { transform: translateY(-2px); box-shadow: 0 6px 15px rgba(0,0,0,0.05); }
        .stat-group { display: grid; grid-template-columns: 1fr 1fr; gap: 6px; margin-top: 10px; font-size: 0.85rem; }
        .stat-tag { background: #fafafa; padding: 4px 8px; border-radius: 8px; display: flex; justify-content: space-between; border: 1px solid #f5f5f5; }
        .stat-label { color: #90a4ae; } .stat-val { color: #7986cb; font-weight: 700; }
        .status-bar-group { margin-top: 12px; }
        .status-bar { height: 8px; background: #eceff1; border-radius: 4px; overflow: hidden; margin-bottom: 4px; }
        .status-fill { height: 100%; transition: width 0.6s ease; }
        #log-container { height: 500px; overflow-y: auto; font-size: 0.85rem; background: #ffffff; padding: 15px; border-radius: 16px; border: 1px solid var(--border); }
        .log-entry { padding: 8px; border-bottom: 1px solid #f8f9fa; border-left: 4px solid #eceff1; margin-bottom: 4px; }
        .log-battle { background: #fff9c4; border-left-color: #fbc02d; font-weight: bold; }
        .log-danger { background: #ffebee; border-left-color: var(--danger); }
        .log-info { background: #e8f5e9; border-left-color: var(--secondary); }
        .btn-group { display: flex; gap: 6px; margin-top: 10px; flex-wrap: wrap; }
        button { cursor: pointer; background: var(--primary); color: white; border: none; padding: 10px; border-radius: 10px; font-weight: 600; flex: 1; }
        .btn-skip { background: var(--secondary); margin-top: 5px; }
        .modal { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; z-index: 100; padding: 25px; border-radius: 20px; width: 90%; max-width: 400px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .overlay { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.3); z-index:99; backdrop-filter: blur(2px); }
        .guide-box { font-size: 0.85rem; color: #78909c; margin-top: 20px; padding: 15px; background: #f1f8e9; border-radius: 12px; border: 1px solid #c5e1a5; }
        .guide-box h4 { margin-top: 0; color: #558b2f; }
        .guide-box ul { padding-left: 20px; margin-bottom: 0; }
    </style>
</head>
<body>

    <header>
        <input type="text" id="company-name-input" class="company-name" value="íšŒì‚¬" onchange="saveLocal()">
    </header>
    
    <div class="container">
        <div>
            <div class="tabs">
                <button class="tab-btn active" onclick="openTab('main-tab', this)">ğŸ‘¥ ì‚¬ì›</button>
                <button class="tab-btn" onclick="openTab('rel-tab', this)">ğŸ•¸ï¸ ê´€ê³„</button>
                <button class="tab-btn" onclick="openTab('data-tab', this)">ğŸ’¾ ë°ì´í„° ê´€ë¦¬</button>
            </div>

            <div id="main-tab" class="tab-content active">
                <div class="card">
                    <p>ğŸ’° ìì‚°: <span id="money" style="font-weight:bold; color:#5c6bc0;">0</span>ì› | ğŸ“… <span id="days">1</span>ì¼ì°¨</p>
                    <div class="btn-group">
                        <button onclick="hireCharacter()">ì‹ ì… ì±„ìš© (5,000ì›)</button>
                        <button class="btn-skip" onclick="processDay()">â© ë‹¤ìŒ ë‚ ë¡œ (Day Skip)</button>
                    </div>
                </div>
                
                <div class="card">
                    <h2>ğŸ“‘ ì‚¬ì› ëª…ë¶€</h2>
                    <div id="char-list" class="char-grid"></div>
                </div>

                <div class="guide-box">
                    <h4>ğŸ“˜ ê²Œì„ ì•ˆë‚´ì„œ</h4>
                    <ul>
                        <li><b>ìì‚°:</b> ì‚¬ì›ë“¤ì´ 3ì´ˆë§ˆë‹¤ ì—…ë¬´ë¥¼ ìˆ˜í–‰í•˜ì—¬ ëˆì„ ë²•ë‹ˆë‹¤.</li>
                        <li><b>ì±„ìš©:</b> 5,000ì›ìœ¼ë¡œ ìƒˆ ì‚¬ì›ì„ ì˜ì…í•©ë‹ˆë‹¤. ì´ë¦„ì€ í´ë¦­í•´ì„œ ìˆ˜ì • ê°€ëŠ¥!</li>
                        <li><b>ê´€ê³„:</b> ì‚¬ì›ë“¤ì€ ë§¤ì¼ ë¬´ì‘ìœ„ë¡œ êµë¥˜í•˜ë©° <b>ì°ì¹œ, ì•…ì—°, ë¼ì´ë²Œ</b>ì´ ë©ë‹ˆë‹¤.</li>
                        <li><b>ìŠ¹ì§„ ë°°í‹€:</b> ê²½í—˜ì¹˜ê°€ ìŒ“ì´ë©´ ë™ë£Œì™€ ëŒ€ê²°í•©ë‹ˆë‹¤. ê´€ê³„ ë³´ë„ˆìŠ¤ê°€ ìŠ¹íŒ¨ë¥¼ ì¢Œìš°í•©ë‹ˆë‹¤.</li>
                        <li><b>ìŠ¤íŠ¸ë ˆìŠ¤(ë…¸ë€ë°”):</b> 100ì´ ë˜ë©´ <b>ì²´ë ¥(ë¹¨ê°„ë°”)</b>ì´ ê¹ì´ê³  ë³‘ê°€ë¥¼ ê°‘ë‹ˆë‹¤.</li>
                    </ul>
                </div>
            </div>

            <div id="rel-tab" class="tab-content">
                <div class="card">
                    <h2>ğŸ•¸ï¸ ê´€ê³„ ë¦¬í¬íŠ¸</h2>
                    <div id="rel-list"></div>
                </div>
            </div>

            <div id="data-tab" class="tab-content">
                <div class="card">
                    <h3>ğŸ“ ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸°</h3>
                    <div class="file-box">
                        <button onclick="exportMembers()">ì‚¬ì›/ê´€ê³„ ë‚´ë³´ë‚´ê¸°</button>
                        <button onclick="exportStatus()">ì§„í–‰ìƒí™© ë‚´ë³´ë‚´ê¸°</button>
                    </div>
                    <div class="file-box">
                        <p style="font-size:0.8rem; margin-top:0;">ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°:</p>
                        <input type="file" id="universal-input" style="font-size:0.7rem" accept=".json" onchange="importData(event)">
                    </div>
                    <button class="danger" style="width:100%; margin-top:20px;" onclick="resetGame()">ì´ˆê¸°í™”</button>
                </div>
            </div>
        </div>

        <div>
            <div class="card">
                <h2>ğŸ“œ ì—…ë¬´ & í™œë™ ë¡œê·¸</h2>
                <div id="log-container"></div>
            </div>
        </div>
    </div>

    <div class="overlay" id="overlay" onclick="closeModal()"></div>
    
    <div id="edit-modal" class="modal">
        <h3 id="modal-char-name" style="margin-top:0; color:var(--primary);">ì‚¬ì› ê´€ë¦¬</h3>
        <label style="font-size:0.8rem;">ì´ë¦„ ìˆ˜ì •</label>
        <input type="text" id="edit-name" class="modal-input">
        <label style="font-size:0.8rem;">ìƒëŒ€ ì„ íƒ (ê´€ê³„ì„¤ì • / ë°°í‹€ëŒ€ìƒ)</label>
        <select id="target-select" class="modal-select"></select>
        <label style="font-size:0.8rem;">ê´€ê³„ ì¢…ë¥˜</label>
        <select id="type-select" class="modal-select"></select>
        <div class="btn-group">
            <button onclick="applyChanges()">ì €ì¥ ë° ê´€ê³„ì ìš©</button>
            <button class="warning" style="color:#455a64" onclick="manualBattle()">ìˆ˜ë™ ìŠ¹ì§„ ë°°í‹€</button>
        </div>
        <hr style="margin:15px 0; border:0; border-top:1px solid #eee;">
        <div class="btn-group">
            <button class="danger" onclick="deleteCharacter()">ì‚¬ì› í‡´ì‚¬(ì‚­ì œ)</button>
            <button style="background:#ccc" onclick="closeModal()">ë‹«ê¸°</button>
        </div>
    </div>

<script>
    let money = 20000;
    let days = 1;
    let characters = [];
    let relationships = [];
    let selectedCharId = null;

    const ranks = ["ì¸í„´", "ì‚¬ì›", "ëŒ€ë¦¬", "ê³¼ì¥", "ì°¨ì¥", "ë¶€ì¥", "ì´ì‚¬", "CEO"];
    const relTypes = [
        { name: "ì—°ì• ", emoji: "â¤ï¸", bonus: -5 },
        { name: "ì•…ì—°", emoji: "ğŸ”¥", bonus: 10 },
        { name: "ì°ì¹œ", emoji: "ğŸ¤", bonus: -3 },
        { name: "ë¼ì´ë²Œ", emoji: "âš¡", bonus: 15 },
        { name: "ë¬´ê´€ì‹¬", emoji: "ğŸ˜", bonus: 0 }
    ];

    // --- í•µì‹¬ ë¡œì§: í•˜ë£¨ ì§„í–‰ ---
    function processDay() {
        days++;
        
        // 1. ëœë¤ ì´ë²¤íŠ¸
        if (Math.random() < 0.15) triggerEvent(); 
        
        // 2. ì‚¬ì› ìƒíƒœ ì—…ë°ì´íŠ¸
        characters.forEach(c => {
            if (c.health <= 0) { 
                c.health = Math.min(100, c.health + 10); 
                return; 
            }
            c.work += 0.05; 
            c.exp += Math.floor(Math.random() * 10) + 5;
            c.stress += Math.floor(Math.random() * 6);
            money += Math.floor(c.work * 6);
            
            if (c.stress >= 100) { 
                c.health -= 30; 
                c.stress = 40; 
                addLog(`ğŸš‘ ${c.name} ê³¼ë¡œë¡œ ì“°ëŸ¬ì§`, "log-danger"); 
            }
            
            // ìë™ ìŠ¹ì§„ ì²´í¬
            if (c.exp >= (c.rankIdx + 1) * 150 && c.rankIdx < ranks.length - 1) {
                initiatePromotionBattle(c);
            }
        });

        // 3. ìë™ ìƒí˜¸ì‘ìš©
        if (characters.length >= 2 && Math.random() < 0.4) {
            handleAutoInteraction();
        }

        updateUI(); 
        saveLocal();
    }

    // ì‹¤ì‹œê°„ ìë™ ì§„í–‰ ë£¨í”„ (3ì´ˆë§ˆë‹¤ processDay í˜¸ì¶œ)
    setInterval(processDay, 3000);

    function hireCharacter() {
        if (money < 5000) return addLog("ğŸ’° ìì‚° ë¶€ì¡±!", "log-danger");
        money -= 5000;
        const name = "ì‚¬ì›" + (characters.length + 1);
        characters.push({
            id: Date.now() + Math.random(), 
            name, rankIdx: 0, stress: 0, health: 100, exp: 0,
            work: 15 + Math.random() * 10, talk: 10 + Math.random() * 10, luck: Math.floor(Math.random() * 10) + 1
        });
        addLog(`âœ¨ ${name} ì‹ ì… ì…ì‚¬`, "log-info");
        updateUI();
    }

    function handleAutoInteraction() {
        const idx1 = Math.floor(Math.random() * characters.length);
        let idx2 = Math.floor(Math.random() * characters.length);
        while (idx1 === idx2) idx2 = Math.floor(Math.random() * characters.length);

        const p1 = characters[idx1];
        const p2 = characters[idx2];
        const rand = Math.random();

        if (rand < 0.4) {
            addLog(`ğŸ’¬ ${p1.name}ì™€(ê³¼) ${p2.name}ê°€ ì»¤í”¼ë¥¼ ë§ˆì‹œë©° ìˆ˜ë‹¤ë¥¼ ë–±ë‹ˆë‹¤.`, "log-info");
            p1.stress = Math.max(0, p1.stress - 5);
            p2.stress = Math.max(0, p2.stress - 5);
            updateOrAddRel(p1, p2, "ì°ì¹œ", "ğŸ¤");
        } else if (rand < 0.7) {
            addLog(`ğŸ’¢ ${p1.name}ì™€(ê³¼) ${p2.name}ê°€ ì—…ë¬´ ë¬¸ì œë¡œ ë§ë‹¤íˆ¼ì„ í•©ë‹ˆë‹¤.`, "log-danger");
            p1.stress += 10;
            p2.stress += 10;
            updateOrAddRel(p1, p2, "ì•…ì—°", "ğŸ”¥");
        } else {
            addLog(`âš¡ ${p1.name}ì™€(ê³¼) ${p2.name} ì‚¬ì´ì— ë¬˜í•œ ê¸´ì¥ê°ì´ íë¦…ë‹ˆë‹¤.`, "log-battle");
            p1.exp += 10;
            p2.exp += 10;
            updateOrAddRel(p1, p2, "ë¼ì´ë²Œ", "âš¡");
        }
    }

    function updateOrAddRel(p1, p2, typeName, emoji) {
        relationships = relationships.filter(r => !((r.p1 === p1.id && r.p2 === p2.id) || (r.p1 === p2.id && r.p2 === p1.id)));
        relationships.push({ p1: p1.id, p1Name: p1.name, p2: p2.id, p2Name: p2.name, type: typeName, emoji: emoji });
    }

    function triggerEvent() {
        const evts = [
            { n: "ì •ì „", f: () => { money -= 2000; addLog("âš¡ ê°‘ì‘ìŠ¤ëŸ¬ìš´ ì •ì „! ì—…ë¬´ ì†ì‹¤ (-2,000ì›)", "log-danger"); }},
            { n: "ë³´ë„ˆìŠ¤", f: () => { money += 5000; addLog("ğŸ§§ ì •ë¶€ ì§€ì›ê¸ˆ ë‹¹ì²¨! (+5,000ì›)", "log-info"); }},
            { n: "ì•¼ê·¼", f: () => { characters.forEach(c => c.stress += 10); addLog("ğŸŒ™ ì „ ì‚¬ì› ê°•ì œ ì•¼ê·¼ (ìŠ¤íŠ¸ë ˆìŠ¤ ì¦ê°€)", "log-danger"); }},
            { n: "íšŒì‹", f: () => { characters.forEach(c => { c.stress = Math.max(0, c.stress - 20); c.health = Math.min(100, c.health + 5); }); addLog("ğŸ» ì¦ê±°ìš´ íšŒì‹! (ìŠ¤íŠ¸ë ˆìŠ¤ í•´ì†Œ)", "log-info"); }},
            { n: "ì˜ê°", f: () => { if(characters.length > 0) { const c = characters[Math.floor(Math.random()*characters.length)]; c.work += 5; addLog(`ğŸ’¡ ${c.name}ì˜ ì•„ì´ë””ì–´ í­ë°œ!`, "log-info"); }}}
        ];
        evts[Math.floor(Math.random()*evts.length)].f();
    }

    function initiatePromotionBattle(p1, targetId = null) {
        let others = characters.filter(o => o.id !== p1.id);
        if (others.length === 0) {
            p1.rankIdx++; p1.exp = 0; addLog(`ğŸŠ ${p1.name} ë‹¨ë… ìŠ¹ì§„!`);
            return;
        }
        const p2 = targetId ? characters.find(o => o.id === targetId) : others[Math.floor(Math.random() * others.length)];
        let bonus = 0;
        const rel = relationships.find(r => (r.p1 === p1.id && r.p2 === p2.id) || (r.p1 === p2.id && r.p2 === p1.id));
        if (rel) bonus = relTypes.find(t => t.name === rel.type)?.bonus || 0;

        const s1 = (p1.work * 1.2) + p1.talk + (p1.luck * Math.random() * 10) + bonus;
        const s2 = (p2.work * 1.2) + p2.talk + (p2.luck * Math.random() * 10);

        addLog(`âš”ï¸ ìŠ¹ì§„ ë°°í‹€: ${p1.name} VS ${p2.name}`, "log-battle");
        if (s1 > s2) {
            p1.rankIdx++; p1.exp = 0;
            addLog(`ğŸ† ${p1.name} ìŠ¹ë¦¬! [${ranks[p1.rankIdx]}] ìŠ¹ì§„`, "log-info");
        } else {
            p1.exp = Math.max(0, p1.exp - 50);
            addLog(`ğŸ“‰ ${p1.name} íŒ¨ë°°... ìŠ¹ê¸‰ ì‹¤íŒ¨`, "log-danger");
        }
    }

    function updateUI() {
        document.getElementById('money').innerText = Math.floor(money).toLocaleString();
        document.getElementById('days').innerText = days;
        const list = document.getElementById('char-list');
        list.innerHTML = characters.map(c => `
            <div class="char-item" onclick="openRelEdit(${c.id})">
                <div style="display:flex; justify-content:space-between; margin-bottom:5px;">
                    <strong>${c.name}</strong>
                    <span style="font-size:0.7rem; color:white; background:var(--primary); padding:2px 6px; border-radius:5px;">${ranks[c.rankIdx]}</span>
                </div>
                <div class="stat-group">
                    <div class="stat-tag"><span class="stat-label">ğŸ’¼ì—…ë¬´</span><span class="stat-val">${c.work.toFixed(1)}</span></div>
                    <div class="stat-tag"><span class="stat-label">ğŸ—£ï¸í™”ìˆ </span><span class="stat-val">${c.talk.toFixed(1)}</span></div>
                    <div class="stat-tag"><span class="stat-label">ğŸ“ˆê²½í—˜</span><span class="stat-val">${c.exp}</span></div>
                    <div class="stat-tag"><span class="stat-label">ğŸ€ìš´</span><span class="stat-val">${c.luck}</span></div>
                </div>
                <div class="status-bar-group">
                    <div class="status-bar"><div class="status-fill" style="width:${c.stress}%; background:var(--warning);"></div></div>
                    <div class="status-bar"><div class="status-fill" style="width:${c.health}%; background:var(--danger);"></div></div>
                </div>
            </div>`).join('');
    }

    function openRelEdit(id) {
        selectedCharId = id;
        const char = characters.find(c => c.id === id);
        const others = characters.filter(o => o.id !== id);
        document.getElementById('modal-char-name').innerText = `${char.name} ê´€ë¦¬`;
        document.getElementById('edit-name').value = char.name;
        document.getElementById('target-select').innerHTML = others.map(o => `<option value="${o.id}">${o.name} (${ranks[o.rankIdx]})</option>`).join('') || '<option value="">ëŒ€ìƒ ì—†ìŒ</option>';
        document.getElementById('type-select').innerHTML = relTypes.map(r => `<option value="${r.name}">${r.emoji} ${r.name}</option>`).join('');
        document.getElementById('edit-modal').style.display = 'block';
        document.getElementById('overlay').style.display = 'block';
    }

    function applyChanges() {
        const char = characters.find(c => c.id === selectedCharId);
        char.name = document.getElementById('edit-name').value;
        const targetId = parseFloat(document.getElementById('target-select').value);
        if(targetId) {
            const p2 = characters.find(c => c.id === targetId);
            const typeName = document.getElementById('type-select').value;
            const type = relTypes.find(r => r.name === typeName);
            updateOrAddRel(char, p2, typeName, type.emoji);
        }
        closeModal(); updateUI(); saveLocal();
    }

    function deleteCharacter() {
        if(!confirm("ì´ ì‚¬ì›ì„ ì •ë§ í‡´ì‚¬ì‹œí‚¤ê² ìŠµë‹ˆê¹Œ?")) return;
        characters = characters.filter(c => c.id !== selectedCharId);
        relationships = relationships.filter(r => r.p1 !== selectedCharId && r.p2 !== selectedCharId);
        addLog("ğŸ‘‹ ì‚¬ì›ì´ íšŒì‚¬ë¥¼ ë– ë‚¬ìŠµë‹ˆë‹¤.", "log-danger");
        closeModal(); updateUI(); saveLocal();
    }

    function openTab(tabId, btn) {
        document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
        btn.classList.add('active');
        if(tabId === 'rel-tab') updateRelUI();
    }

    function closeModal() { document.querySelectorAll('.modal, .overlay').forEach(el => el.style.display = 'none'); }

    function addLog(msg, type) {
        const logBox = document.getElementById('log-container');
        const entry = document.createElement('div');
        entry.className = 'log-entry ' + (type || '');
        entry.innerHTML = `<small>Day ${days}</small> ${msg}`;
        logBox.prepend(entry);
        if(logBox.children.length > 50) logBox.lastChild.remove();
    }

    function updateRelUI() {
        const list = document.getElementById('rel-list');
        list.innerHTML = relationships.length === 0 ? "<p>í˜•ì„±ëœ ê´€ê³„ê°€ ì—†ìŠµë‹ˆë‹¤.</p>" : 
            relationships.map(r => `<div style="padding:8px; border-bottom:1px solid #eee;">${r.p1Name} ${r.emoji} ${r.p2Name} (${r.type})</div>`).join('');
    }

    function exportMembers() { download({ characters, relationships }, "members.json"); }
    function exportStatus() { download({ money, days, companyName: document.getElementById('company-name-input').value }, "status.json"); }
    function download(data, filename) {
        const blob = new Blob([JSON.stringify(data, null, 2)], { type: "application/json" });
        const a = document.createElement("a");
        a.href = URL.createObjectURL(blob); a.download = filename; a.click();
    }
    function importData(e) {
        const reader = new FileReader();
        reader.onload = (ev) => {
            const data = JSON.parse(ev.target.result);
            if(data.characters) { characters = data.characters; relationships = data.relationships || []; }
            if(data.money !== undefined) { money = data.money; days = data.days; document.getElementById('company-name-input').value = data.companyName; }
            updateUI(); addLog("ğŸ“¥ ë°ì´í„° ë¡œë“œ ì™„ë£Œ");
        };
        reader.readAsText(e.target.files[0]);
    }
    function saveLocal() {
        const data = { money, days, characters, relationships, companyName: document.getElementById('company-name-input').value };
        localStorage.setItem('pastel_sim_save', JSON.stringify(data));
    }
    function resetGame() { if(confirm("ì´ˆê¸°í™”í• ê¹Œìš”?")) { localStorage.clear(); location.reload(); } }

    window.onload = () => {
        const saved = localStorage.getItem('pastel_sim_save');
        if (saved) {
            const d = JSON.parse(saved);
            money = d.money; days = d.days; characters = d.characters || [];
            relationships = d.relationships || [];
            document.getElementById('company-name-input').value = d.companyName || "íšŒì‚¬";
            updateUI();
        }
    };
</script>
</body>
</html>